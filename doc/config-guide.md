# é…ç½®æ–‡ä»¶æŒ‡å—

## 1. towers.js â€” é˜²å¾¡å¡”é…ç½®

**è·¯å¾„**ï¼š`src/game/tower-defense/config/towers.js`

### ç°æœ‰å¡”ç±»å‹

| ç±»å‹ | åç§° | emoji | è´¹ç”¨ | ä¼¤å®³ | èŒƒå›´ | å°„é€Ÿ(ms) | ç‰¹æ®Š |
|------|------|-------|------|------|------|----------|------|
| `archer` | å¼“ç®­å¡” | ğŸ¹ | 50 | 15 | 80 | 600 | - |
| `magic` | é­”æ³•å¡” | âœ¨ | 80 | 20 | 70 | 1000 | æº…å°„30px |
| `cannon` | ç‚®å¡” | ğŸ’£ | 100 | 40 | 75 | 1500 | - |
| `ice` | å†°å†»å¡” | â„ï¸ | 70 | 8 | 70 | 800 | å‡é€Ÿ50%/2ç§’ |
| `goldMine` | é‡‘å¸çŸ¿åœº | â›ï¸ | 120 | 0 | 0 | - | æ¯10ç§’äº§12é‡‘ |

### é…ç½®å­—æ®µè¯´æ˜

```js
{
  name: 'å¼“ç®­å¡”',           // æ˜¾ç¤ºåç§°
  emoji: 'ğŸ¹',              // æ˜¾ç¤ºemoji
  cost: 50,                 // å»ºé€ è´¹ç”¨
  health: 100,              // ç”Ÿå‘½å€¼
  damage: 15,               // åŸºç¡€ä¼¤å®³
  range: 80,                // æ”»å‡»èŒƒå›´ï¼ˆé€»è¾‘åƒç´ ï¼‰
  fireRate: 600,            // å°„å‡»é—´éš”ï¼ˆæ¯«ç§’ï¼Œè¶Šå°è¶Šå¿«ï¼‰
  projectileSpeed: 10,      // å­å¼¹é£è¡Œé€Ÿåº¦
  color: '#8B4513',         // åº•åº§é¢œè‰²
  projectileColor: '#FFD700', // å­å¼¹é¢œè‰²
  description: 'æ”»é€Ÿå¿«ï¼Œå•ä½“ä¼¤å®³',
  // å¯é€‰ç‰¹æ®Šå±æ€§
  splash: 30,               // æº…å°„åŠå¾„ï¼ˆä»…magicï¼‰
  slowEffect: 0.5,          // å‡é€Ÿæ¯”ä¾‹ï¼ˆä»…iceï¼‰
  slowDuration: 2000,       // å‡é€ŸæŒç»­æ¯«ç§’ï¼ˆä»…iceï¼‰
  isGoldMine: true,         // æ˜¯å¦ä¸ºé‡‘å¸çŸ¿åœº
  goldPerCycle: 12,         // æ¯å‘¨æœŸäº§é‡‘ï¼ˆä»…çŸ¿åœºï¼‰
  productionInterval: 10000 // äº§é‡‘é—´éš”æ¯«ç§’ï¼ˆä»…çŸ¿åœºï¼‰
}
```

### å‡çº§å…¬å¼

```js
// ä¼¤å®³ï¼šæ¯çº§Ã—1.3
damage = Math.floor(base.damage * Math.pow(1.3, level - 1))
// èŒƒå›´ï¼šæ¯çº§Ã—1.1
range = Math.floor(base.range * Math.pow(1.1, level - 1))
// å°„é€Ÿï¼šæ¯çº§Ã—0.9ï¼ˆè¶Šå°è¶Šå¿«ï¼‰
fireRate = Math.floor(base.fireRate * Math.pow(0.9, level - 1))
// å‡çº§è´¹ç”¨
cost = Math.floor(baseCost * level * 0.7)
// çŸ¿åœºå‡çº§è´¹ç”¨
cost = Math.floor(baseCost * level * 1.0)
// çŸ¿åœºäº§é‡‘é‡ï¼šæ¯çº§+50%
amount = Math.floor(goldPerCycle * (1 + (level-1) * 0.5))
```

### æ·»åŠ æ–°å¡”æ­¥éª¤

1. åœ¨ `TOWER_CONFIGS` ä¸­æ·»åŠ é…ç½®ï¼š
```js
laser: {
  name: 'æ¿€å…‰å¡”', emoji: 'ğŸ”¦', cost: 130,
  health: 90, damage: 25, range: 100, fireRate: 2000,
  projectileSpeed: 20, color: '#00BCD4', projectileColor: '#00FFFF',
  description: 'è¿œç¨‹é«˜ä¼¤ï¼Œå°„é€Ÿæ…¢'
}
```

2. `TOWER_LIST` ä¼šè‡ªåŠ¨ç”Ÿæˆï¼ˆåŸºäº `Object.keys(TOWER_CONFIGS)`ï¼‰

3. å¦‚éœ€ç‰¹æ®Šæ•ˆæœï¼ˆå¦‚ç©¿é€ï¼‰ï¼Œåœ¨ `Tower.js` çš„ `fire()` æˆ– `Projectile.js` çš„ `hit()` ä¸­æ·»åŠ é€»è¾‘

---

## 2. enemies.js â€” æ•Œäººé…ç½®

**è·¯å¾„**ï¼š`src/game/tower-defense/config/enemies.js`

### ç°æœ‰æ•Œäººç±»å‹

| ç±»å‹ | åç§° | emoji | è¡€é‡ | é€Ÿåº¦ | é‡‘å¸ | æ”»å‡»åŠ› |
|------|------|-------|------|------|------|--------|
| `basic` | å°æ€ª | ğŸ‘¾ | 40 | 1.2 | 10 | 1 |
| `fast` | å¿«é€Ÿæ€ª | ğŸ’¨ | 25 | 2.2 | 15 | 1 |
| `tank` | å¦å…‹æ€ª | ğŸ›¡ï¸ | 100 | 0.7 | 25 | 2 |
| `zombie` | åƒµå°¸ | ğŸ§Ÿ | 60 | 0.9 | 20 | 2 |
| `zombieBoss` | åƒµå°¸å¤§Boss | ğŸ§Ÿâ€â™‚ï¸ | 500 | 0.5 | 150 | 5 |
| `boss` | Boss | ğŸ‘¹ | 300 | 0.6 | 100 | 3 |

### æ³¢æ¬¡ç”Ÿæˆè§„åˆ™ `getWaveEnemies(wave)`

| æ³¢æ¬¡ | æ•Œäººç»„åˆ |
|------|---------|
| 1-3 | ä»…basicï¼ˆ2-4ä¸ªï¼‰ |
| 4-6 | basic + fast + zombie |
| 7-10 | + tankï¼Œç¬¬10æ³¢å‡ºBoss |
| 11+ | å…¨ç±»å‹ï¼ŒBossæ¯5æ³¢/4æ³¢å‡ºï¼Œåƒµå°¸å¤§Bossç¬¬8æ³¢èµ·æ¯6æ³¢å‡º |

### å±æ€§ç¼©æ”¾ `getEnemyStats(type, wave, levelMul)`

**è¡€é‡ç¼©æ”¾**ï¼š
| æ³¢æ¬¡ | æ¯æ³¢å¢é•¿ |
|------|---------|
| 1-3 | +5% |
| 4-6 | +10% |
| 7-10 | +15% |
| 11+ | +20% |

**é€Ÿåº¦ç¼©æ”¾**ï¼šæ³¢æ¬¡11+åæ¯æ³¢+3%ï¼Œæœ€é«˜+30%

**å…³å¡ç³»æ•°**ï¼š`healthMul` å’Œ `speedMul` ä¹˜ä»¥ä¸Šè¿°ç»“æœ

### æ·»åŠ æ–°æ•Œäººæ­¥éª¤

1. åœ¨ `ENEMY_CONFIGS` æ·»åŠ é…ç½®
2. åœ¨ `getWaveEnemies()` ä¸­æ·»åŠ ç”Ÿæˆæ¡ä»¶
3. æ— éœ€ä¿®æ”¹ `Enemy.js`ï¼ˆè‡ªåŠ¨ä½¿ç”¨é…ç½®ï¼‰

---

## 3. levels.js â€” å…³å¡é…ç½®

**è·¯å¾„**ï¼š`src/game/tower-defense/config/levels.js`

### ç°æœ‰6ä¸ªå…³å¡

| ID | åç§° | emoji | ç”Ÿå‘½ | é‡‘å¸ | æ³¢æ•° | è¡€é‡å€ | é€Ÿåº¦å€ | é¢˜ç›®éš¾åº¦ | è§£é”æ¡ä»¶ |
|----|------|-------|------|------|------|--------|--------|----------|----------|
| 1 | æ–°æ‰‹è®­ç»ƒ | ğŸŒ± | 30 | 150 | 5 | 0.7 | 0.85 | 1-1 | é»˜è®¤ |
| 2 | åˆæ¬¡æŒ‘æˆ˜ | âš”ï¸ | 25 | 120 | 8 | 0.85 | 0.9 | 1-2 | å…³å¡1â‰¥1æ˜Ÿ |
| 3 | æ•°å­¦æˆ˜åœº | ğŸ“ | 20 | 100 | 10 | 1.0 | 1.0 | 1-2 | å…³å¡2â‰¥1æ˜Ÿ |
| 4 | ç²¾è‹±é˜²çº¿ | ğŸ›¡ï¸ | 20 | 100 | 12 | 1.15 | 1.05 | 1-3 | å…³å¡3â‰¥1æ˜Ÿ |
| 5 | åœ°ç‹±éš¾åº¦ | ğŸ”¥ | 15 | 80 | 15 | 1.3 | 1.15 | 2-3 | å…³å¡4â‰¥2æ˜Ÿ |
| 6 | ç»ˆæBoss | ğŸ’€ | 10 | 80 | 20 | 1.5 | 1.2 | 2-3 | å…³å¡5â‰¥2æ˜Ÿ |

### å…³å¡é…ç½®å­—æ®µ

```js
{
  id: 1,
  name: 'æ–°æ‰‹è®­ç»ƒ',
  emoji: 'ğŸŒ±',
  description: 'å­¦ä¹ åŸºç¡€æ“ä½œ',
  startingLives: 30,          // åˆå§‹ç”Ÿå‘½å€¼
  startingGold: 150,          // åˆå§‹é‡‘å¸
  totalWaves: 5,              // é€šè¿‡æ­¤æ³¢æ•°å³èƒœåˆ©
  enemyHealthMul: 0.7,        // æ•Œäººè¡€é‡å€ç‡
  enemySpeedMul: 0.85,        // æ•Œäººé€Ÿåº¦å€ç‡
  mathDiffRange: [1, 1],      // æ•°å­¦é¢˜éš¾åº¦èŒƒå›´ï¼ˆ1=ç®€å•, 3=å›°éš¾ï¼‰
  unlockCondition: null        // null=é»˜è®¤è§£é”
  // æˆ– { levelId: 1, stars: 1 }  // éœ€è¦æŒ‡å®šå…³å¡è¾¾åˆ°æŒ‡å®šæ˜Ÿæ•°
}
```

### æ·»åŠ æ–°å…³å¡æ­¥éª¤

1. åœ¨ `LEVELS` æ•°ç»„æœ«å°¾æ·»åŠ é…ç½®ï¼š
```js
{
  id: 7, name: 'æ•°å­¦å¥¥èµ›', emoji: 'ğŸ†',
  description: 'åªæœ‰æ•°å­¦å¤§å¸ˆæ‰èƒ½é€šè¿‡',
  startingLives: 10, startingGold: 60, totalWaves: 25,
  enemyHealthMul: 1.8, enemySpeedMul: 1.3,
  mathDiffRange: [3, 3],
  unlockCondition: { levelId: 6, stars: 3 }
}
```

2. `getLevelConfig(id)` å’Œ `isLevelUnlocked(id, progress)` è‡ªåŠ¨æ”¯æŒ

### å…³å¡è¿›åº¦å­˜å‚¨æ ¼å¼

```js
// å­˜å‚¨é”®ï¼šuser_{userId}_progress
{
  "1": { bestStars: 3, bestWave: 5, bestScore: 1200, completed: true },
  "2": { bestStars: 2, bestWave: 8, bestScore: 900, completed: true }
}
```
